<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://docs.ncronjob.dev/features/model-dependencies/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Model dependencies - NCronJob</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Model dependencies";
        var mkdocs_page_input_path = "features/model-dependencies.md";
        var mkdocs_page_url = "/features/model-dependencies/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../logo_small.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">NCronJob</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Overview</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../getting-started/">Getting Started</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Features</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../define-and-schedule-jobs/">Define and Schedule Jobs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../parameters/">Passing Parameters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../notifications/">Notifications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../multiple-cron-expressions/">Registering multiple CRON expressions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../instant-jobs/">Triggering instant jobs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../concurrency-control/">Concurrency control</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../retry-support/">Retry support</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../minimal-api/">Minimal API</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../startup-jobs/">Startup Jobs</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Model dependencies</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#modelling-dependencies-with-executewhen">Modelling Dependencies with ExecuteWhen</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#passing-parameters-to-dependent-jobs">Passing parameters to dependent jobs</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#accessing-the-state-of-the-parent-job">Accessing the state of the parent job</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#order-of-execution-between-inotificationjobhandler-and-dependent-jobs">Order of execution between INotificationJobHandler and dependent jobs</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tracing-requests-of-dependencies-via-correlationid">Tracing requests of dependencies via CorrelationId</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#cancelling-dependent-jobs">Cancelling dependent jobs</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#minimal-api">Minimal API</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#getting-the-parent-jobs-output-in-a-minimal-api">Getting the parent job&rsquo;s output in a Minimal API</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#defining-dependencies-for-minimal-jobs">Defining dependencies for minimal Jobs</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#run-mutliple-jobs-after-the-completion-of-a-job">Run mutliple jobs after the completion of a job</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#construct-complex-dependencies">Construct complex dependencies</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../exception-handler/">Exception handler</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Migration</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../migration/v4/">v4 Migration Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../migration/v3/">v3 Migration Guide</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../migration/v2/">v2 Migration Guide</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/log-level/">Controlling the log level</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/global-concurrency/">Global Concurrency</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/dynamic-job-control/">Dynamic Job Control</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">NCronJob</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Features</li>
      <li class="breadcrumb-item active">Model dependencies</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/NCronJob-Dev/NCronJob/edit/main/docs/features/model-dependencies.md">Edit on NCronJob-Dev/NCronJob</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="model-dependencies">Model Dependencies<a class="headerlink" href="#model-dependencies" title="Permanent link">&para;</a></h1>
<p>This chapter explains how to define jobs that should automatically run based on the completion of other jobs. This feature is useful when you have a series of tasks that must be executed in a specific order allowing to build a pipeline of jobs.</p>
<h2 id="modelling-dependencies-with-executewhen">Modelling Dependencies with <code>ExecuteWhen</code><a class="headerlink" href="#modelling-dependencies-with-executewhen" title="Permanent link">&para;</a></h2>
<p>In <strong>NCronJob</strong>, you can define job dependencies using the <code>ExecuteWhen</code> method. This method allows you to specify that a job should run only after another job has completed successfully or faulted.</p>
<div class="codehilite"><pre><span></span><code><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span>
<span class="w">        </span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">SuccessJob</span><span class="o">&gt;</span><span class="p">(),</span>
<span class="w">        </span><span class="n">faulted</span><span class="p">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">FaultedJob</span><span class="o">&gt;</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>

<p>Both <code>success</code> and <code>faulted</code> are optional so that you can define only one of them if needed. <code>RunJob</code> can be chained to allow multiple jobs to run after the completion of the main job.</p>
<p>This allows very complex job dependencies to be defined in a simple and readable way.
<img alt="dependencies" src="../../assets/flow.webp" /></p>
<h3 id="passing-parameters-to-dependent-jobs">Passing parameters to dependent jobs<a class="headerlink" href="#passing-parameters-to-dependent-jobs" title="Permanent link">&para;</a></h3>
<p>The <code>RunJob</code> method allows optional parameters to be passed to the dependent job. </p>
<div class="codehilite"><pre><span></span><code><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">SuccessJob</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;Foo&quot;</span><span class="p">));</span>
<span class="p">});</span>
</code></pre></div>

<h2 id="accessing-the-state-of-the-parent-job">Accessing the state of the parent job<a class="headerlink" href="#accessing-the-state-of-the-parent-job" title="Permanent link">&para;</a></h2>
<p>The <code>JobExecutionContext</code> object passed to the dependent job contains the output of the parent job. This allows access to the state of the parent job. This can be helpful if information should flow from parent to the child job.</p>
<div class="codehilite"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">JobA</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IJob</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">ExecuteAsync</span><span class="p">(</span><span class="n">IJobExecutionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">context</span><span class="p">.</span><span class="n">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello World&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Task</span><span class="p">.</span><span class="n">CompletedTask</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">JobB</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IJob</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">ExecuteAsync</span><span class="p">(</span><span class="n">IJobExecutionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">parentOutput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">context</span><span class="p">.</span><span class="n">ParentOutput</span><span class="p">;</span><span class="w"> </span><span class="c1">// &quot;Hello World&quot;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Task</span><span class="p">.</span><span class="n">CompletedTask</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Register the dependency so that JobB runs after JobA automatically</span>
<span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobA</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>

<h2 id="order-of-execution-between-inotificationjobhandler-and-dependent-jobs">Order of execution between <code>INotificationJobHandler</code> and dependent jobs<a class="headerlink" href="#order-of-execution-between-inotificationjobhandler-and-dependent-jobs" title="Permanent link">&para;</a></h2>
<p>If a job has a dependency on another job, the dependent job will run after the <code>INotificationJobHandler</code> has been executed and awaited.</p>
<h2 id="tracing-requests-of-dependencies-via-correlationid">Tracing requests of dependencies via <code>CorrelationId</code><a class="headerlink" href="#tracing-requests-of-dependencies-via-correlationid" title="Permanent link">&para;</a></h2>
<p>Every <code>JobExecutionContext</code> has a <code>CorrelationId</code> property that can be used to trace the execution of dependent jobs. This property is automatically set to the <code>CorrelationId</code> of the parent job and stays the same for all dependent jobs down the chain.</p>
<h2 id="cancelling-dependent-jobs">Cancelling dependent jobs<a class="headerlink" href="#cancelling-dependent-jobs" title="Permanent link">&para;</a></h2>
<p>To actively cancel dependent jobs, the <code>JobExecutionContext</code> object passed offers a <code>SkipChildren</code> method. This method can be called to prevent dependent jobs from running.</p>
<div class="codehilite"><pre><span></span><code><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">JobA</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IJob</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">ExecuteAsync</span><span class="p">(</span><span class="n">IJobExecutionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">context</span><span class="p">.</span><span class="n">SkipChildren</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Task</span><span class="p">.</span><span class="n">CompletedTask</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">JobB</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">IJob</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">public</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="nf">ExecuteAsync</span><span class="p">(</span><span class="n">IJobExecutionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// This job will not run</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">Task</span><span class="p">.</span><span class="n">CompletedTask</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobA</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>

<h2 id="minimal-api">Minimal API<a class="headerlink" href="#minimal-api" title="Permanent link">&para;</a></h2>
<p>The <code>ExecuteWhen</code> method can also be used in a <a href="../minimal-api/">Minimal API</a> to define job dependencies:</p>
<div class="codehilite"><pre><span></span><code><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">ImportDataJob</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span>
<span class="w">        </span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="n">ITransfomerService</span><span class="w"> </span><span class="n">transformerService</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">transformerService</span><span class="p">.</span><span class="n">TransformDataAsync</span><span class="p">()),</span>
<span class="w">        </span><span class="n">faulted</span><span class="p">:</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">f</span><span class="p">.</span><span class="n">RunJob</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="n">INotificationService</span><span class="w"> </span><span class="n">notificationService</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">notificationService</span><span class="p">.</span><span class="n">SendNotificationAsync</span><span class="p">()));</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="getting-the-parent-jobs-output-in-a-minimal-api">Getting the parent job&rsquo;s output in a Minimal API<a class="headerlink" href="#getting-the-parent-jobs-output-in-a-minimal-api" title="Permanent link">&para;</a></h3>
<p>If you pass in a <code>JobExecutionContext</code> to the dependent job, you can access the parent job&rsquo;s output:</p>
<div class="codehilite"><pre><span></span><code><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">ImportDataJob</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span>
<span class="w">        </span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="n">IJobExecutionContext</span><span class="w"> </span><span class="n">context</span><span class="p">,</span><span class="w"> </span><span class="n">ITransfomerService</span><span class="w"> </span><span class="n">transformerService</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="kt">var</span><span class="w"> </span><span class="n">parentOutput</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">MyDataModel</span><span class="p">)</span><span class="n">context</span><span class="p">.</span><span class="n">ParentOutput</span><span class="p">;</span>
<span class="w">            </span><span class="k">await</span><span class="w"> </span><span class="n">transformerService</span><span class="p">.</span><span class="n">TransformDataAsync</span><span class="p">(</span><span class="n">parentOutput</span><span class="p">);</span>
<span class="w">        </span><span class="p">}));</span>
<span class="p">});</span>
</code></pre></div>

<h3 id="defining-dependencies-for-minimal-jobs">Defining dependencies for minimal Jobs<a class="headerlink" href="#defining-dependencies-for-minimal-jobs" title="Permanent link">&para;</a></h3>
<p>To define that a job should be executed afterward, you can use the <code>AddJob</code> overload like this:</p>
<div class="codehilite"><pre><span></span><code><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="p">(</span><span class="k">async</span><span class="w"> </span><span class="p">(</span><span class="n">IMyService</span><span class="w"> </span><span class="n">myService</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">myService</span><span class="p">.</span><span class="n">Run</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">b</span><span class="p">.</span><span class="n">RunJob</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Console</span><span class="p">.</span><span class="n">Write</span><span class="p">(</span><span class="s">&quot;Run when successful&quot;</span><span class="p">)));</span>
<span class="p">});</span>
</code></pre></div>

<h2 id="run-mutliple-jobs-after-the-completion-of-a-job">Run mutliple jobs after the completion of a job<a class="headerlink" href="#run-mutliple-jobs-after-the-completion-of-a-job" title="Permanent link">&para;</a></h2>
<p>You can run multiple jobs after the completion of a job:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Job</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">successful</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">Job</span><span class="w"> </span><span class="n">B</span>
<span class="w">      </span><span class="o">|-</span><span class="w"> </span><span class="n">successful</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">Job</span><span class="w"> </span><span class="n">C</span>
</code></pre></div>

<p>Can be achieved in two ways:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobA</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">().</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobC</span><span class="o">&gt;</span><span class="p">());</span>
<span class="p">});</span>
</code></pre></div>

<p>Or by chaining the <code>ExecuteWhen</code> method:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobA</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobC</span><span class="o">&gt;</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// Register JobB and JobC into the container to avoid warnings</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">();</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobC</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The order of execution of the dependent jobs is not guaranteed. They will not necessarily run in the order of registration.</p>
<p>In the example above, it can happen that <code>JobC</code> runs before <code>JobB</code>.
If you need to ensure the order of execution, see the next section.</p>
</div>
<h2 id="construct-complex-dependencies">Construct complex dependencies<a class="headerlink" href="#construct-complex-dependencies" title="Permanent link">&para;</a></h2>
<p>You can construct complex dependencies by using a combination of <code>AddJob</code> and <code>ExecuteWhen</code> methods. Here an example:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Job</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Job</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Job</span><span class="w"> </span><span class="n">C</span>
</code></pre></div>

<p>This can be achieved by:</p>
<div class="codehilite"><pre><span></span><code><span class="n">Services</span><span class="p">.</span><span class="n">AddNCronJob</span><span class="p">(</span><span class="n">options</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>
<span class="p">{</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobA</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">           </span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobB</span><span class="o">&gt;</span><span class="p">().</span><span class="n">ExecuteWhen</span><span class="p">(</span><span class="n">success</span><span class="p">:</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">RunJob</span><span class="o">&lt;</span><span class="n">JobC</span><span class="o">&gt;</span><span class="p">());</span>

<span class="w">    </span><span class="c1">// Register JobC into the container to avoid warnings</span>
<span class="w">    </span><span class="n">options</span><span class="p">.</span><span class="n">AddJob</span><span class="o">&lt;</span><span class="n">JobC</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../startup-jobs/" class="btn btn-neutral float-left" title="Startup Jobs"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../exception-handler/" class="btn btn-neutral float-right" title="Exception handler">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>2024 <a href="https://github.com/NCronJob-Dev">NCronJob-Dev</a>.</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/NCronJob-Dev/NCronJob" class="fa fa-code-fork" style="color: #fcfcfc"> NCronJob-Dev/NCronJob</a>
        </span>
    
    
      <span><a href="../startup-jobs/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../exception-handler/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
